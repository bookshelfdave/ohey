#!/usr/bin/env ruby
#
require 'readline'
require 'json'
require 'ohey'
puts "Oh, hey!"

file = open(ARGV[0])
json = file.read
parsed = JSON.parse(json)

Query::json = parsed
while line = Readline.readline('> ', true)
  o = O.parse(line)
  if o.value.length == 1
    puts "#{o.value.flatten}"
  else
    puts "#{o.value}"
  end
end
